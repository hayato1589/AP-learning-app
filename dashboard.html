<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>学習分析ダッシュボード - AP-learning-app</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Chart.js CDN（必要に応じて利用） -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .dashboard-section { margin: 2em 0; }
    .dashboard-title { font-size: 1.3em; font-weight: bold; margin-bottom: 0.5em; }
    .dashboard-flex { display: flex; flex-wrap: wrap; gap: 2em; }
    .dashboard-card { background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #0001; padding: 1.5em; flex: 1 1 320px; min-width: 280px; }
    .progress-bar-bg { background: #eee; border-radius: 8px; height: 24px; width: 100%; }
    .progress-bar { background: #4caf50; height: 100%; border-radius: 8px; transition: width 0.5s; }
    .bar-label { font-size: 0.95em; margin-bottom: 0.2em; }
    .heatmap-table { border-collapse: collapse; width: 100%; }
    .heatmap-table th, .heatmap-table td { border: 1px solid #ccc; padding: 0.5em; text-align: center; }
    .heatmap-cell { color: #fff; font-weight: bold; }
    .badge { display: inline-block; background: #2196f3; color: #fff; border-radius: 12px; padding: 0.2em 0.8em; font-size: 0.9em; margin-left: 0.5em; }
    @media (max-width: 700px) { .dashboard-flex { flex-direction: column; } }
  </style>
</head>
<body style="background:#f7f7f7; font-family:sans-serif;">
  <main style="max-width:900px;margin:2em auto;">
    <h1>学習分析ダッシュボード</h1>

    <!-- 進捗・成績表示（Chart.js円グラフ＋棒グラフ） -->
    <section class="dashboard-section">
      <div class="dashboard-title">学習進捗</div>
      <div class="dashboard-flex">
        <div class="dashboard-card">
          <canvas id="progressPie" width="180" height="180" aria-label="進捗円グラフ"></canvas>
          <div style="text-align:center;margin-top:0.5em;">全体進捗</div>
        </div>
        <div class="dashboard-card">
          <canvas id="categoryBar" width="320" height="180" aria-label="カテゴリ別進捗"></canvas>
          <div style="text-align:center;margin-top:0.5em;">カテゴリ別進捗</div>
        </div>
      </div>
    </section>

    <!-- 苦手分野（ヒートマップ＋ワースト5） -->
    <section class="dashboard-section">
      <div class="dashboard-title">苦手分野分析</div>
      <div class="dashboard-flex">
        <div class="dashboard-card">
          <table class="heatmap-table">
            <thead><tr><th>カテゴリ</th><th>正答率</th></tr></thead>
            <tbody>
              <tr><td>ネットワーク</td><td class="heatmap-cell" style="background:#e57373">42%</td></tr>
              <tr><td>データベース</td><td class="heatmap-cell" style="background:#ffb74d">58%</td></tr>
              <tr><td>セキュリティ</td><td class="heatmap-cell" style="background:#fff176;color:#333">65%</td></tr>
              <tr><td>アルゴリズム</td><td class="heatmap-cell" style="background:#aed581">78%</td></tr>
              <tr><td>マネジメント</td><td class="heatmap-cell" style="background:#81c784">85%</td></tr>
            </tbody>
          </table>
        </div>
        <div class="dashboard-card">
          <div class="bar-label">正答率ワースト5</div>
          <ol>
            <li>ネットワーク <span class="badge">42%</span></li>
            <li>データベース <span class="badge">58%</span></li>
            <li>セキュリティ <span class="badge">65%</span></li>
            <li>アルゴリズム <span class="badge">78%</span></li>
            <li>マネジメント <span class="badge">85%</span></li>
          </ol>
        </div>
      </div>
    </section>

    <!-- 時系列分析（Chart.js折れ線グラフ＋ヒストグラム） -->
    <section class="dashboard-section">
      <div class="dashboard-title">学習傾向（時系列分析）</div>
      <div class="dashboard-flex">
        <div class="dashboard-card">
          <canvas id="weeklyLine" width="320" height="180" aria-label="週間学習量"></canvas>
          <div style="text-align:center;margin-top:0.5em;">週間学習量</div>
        </div>
        <div class="dashboard-card">
          <canvas id="hourlyHist" width="320" height="180" aria-label="学習時間帯"></canvas>
          <div style="text-align:center;margin-top:0.5em;">学習時間帯分布</div>
        </div>
      </div>
    </section>

    <!-- 目標設定と達成度 -->
    <section class="dashboard-section">
      <div class="dashboard-title">目標設定と達成度</div>
      <div class="dashboard-card">
        <div class="bar-label">今週の目標: 50問</div>
        <div class="progress-bar-bg">
          <div class="progress-bar" style="width: 80%"></div>
        </div>
        <div style="margin-top:0.5em;">達成度: <b>40/50問</b> <span class="badge">80%</span></div>
        <div style="margin-top:1em;color:#4caf50;font-weight:bold;">目標達成まであと10問！</div>
      </div>
    </section>

    <!-- 比較分析（Chart.jsレーダーチャート） -->
    <section class="dashboard-section">
      <div class="dashboard-title">比較分析</div>
      <div class="dashboard-card">
        <canvas id="compareRadar" width="320" height="180" aria-label="比較分析"></canvas>
        <div style="text-align:center;margin-top:0.5em;">カテゴリ別平均との比較</div>
      </div>
    </section>

    <!-- レポート生成とシェア（静的UI） -->
    <section class="dashboard-section">
      <div class="dashboard-title">レポート生成・シェア</div>
      <div class="dashboard-card">
        <button disabled>PDF出力（準備中）</button>
        <button disabled>画像保存（準備中）</button>
        <button disabled>SNSシェア（準備中）</button>
        <div style="margin-top:1em;color:#888;">※MVPでは静的UIのみ実装</div>
      </div>
    </section>
  </main>

  <script>
    // Chart.jsを使ったグラフ描画（静的ダミーデータ）
    window.addEventListener('DOMContentLoaded', function() {
      // 進捗円グラフ
      new Chart(document.getElementById('progressPie'), {
        type: 'doughnut',
        data: {
          labels: ['回答済み', '未回答'],
          datasets: [{ data: [120, 30], backgroundColor: ['#4caf50', '#eee'] }]
        },
        options: { cutout: '70%', plugins: { legend: { display: false } } }
      });
      // カテゴリ別進捗
      new Chart(document.getElementById('categoryBar'), {
        type: 'bar',
        data: {
          labels: ['ネットワーク', 'DB', 'セキュリティ', 'アルゴリズム', 'マネジメント'],
          datasets: [{ label: '回答数', data: [30, 25, 40, 20, 35], backgroundColor: '#2196f3' }]
        },
        options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
      });
      // 週間学習量
      new Chart(document.getElementById('weeklyLine'), {
        type: 'line',
        data: {
          labels: ['月', '火', '水', '木', '金', '土', '日'],
          datasets: [{ label: '解答数', data: [5, 8, 6, 7, 10, 12, 9], borderColor: '#ff9800', backgroundColor: '#ffe0b2', fill: true }]
        },
        options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
      });
      // 学習時間帯分布
      new Chart(document.getElementById('hourlyHist'), {
        type: 'bar',
        data: {
          labels: ['6-9時', '9-12時', '12-15時', '15-18時', '18-21時', '21-24時'],
          datasets: [{ label: '解答数', data: [2, 5, 8, 6, 12, 7], backgroundColor: '#8bc34a' }]
        },
        options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
      });
      // 比較分析レーダーチャート
      new Chart(document.getElementById('compareRadar'), {
        type: 'radar',
        data: {
          labels: ['ネットワーク', 'DB', 'セキュリティ', 'アルゴリズム', 'マネジメント'],
          datasets: [
            { label: '自分', data: [42, 58, 65, 78, 85], backgroundColor: 'rgba(33,150,243,0.2)', borderColor: '#2196f3' },
            { label: '平均', data: [60, 65, 70, 80, 75], backgroundColor: 'rgba(158,158,158,0.1)', borderColor: '#9e9e9e' }
          ]
        },
        options: { plugins: { legend: { display: true } }, scales: { r: { min: 0, max: 100 } } }
      });
    });
  </script>
</body>
</html>
